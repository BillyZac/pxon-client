var canvas = document.getElementById('canvas')
var ctx = canvas.getContext('2d')

var helloPxon =
  {
    "exif": {
      "software": "http://august.today",
      "artist": "jenn schiffer",
      "imageDescription": "smile",
      "userComment": "an example pixel drawing to show off pxon",
      "copyright": "jenn schiffer 2015",
      "dateTime": "2015-09-17T15:21:51.761Z"
    },
    "pxif": {
      "pixels": [
        {
          "x": 75,
          "y": 69,
          "color": "rgba(0, 0, 0, 1)",
          "size": 15
        },
        {
          "x": 80,
          "y": 84,
          "color": "rgba(0, 0, 0, 1)",
          "size": 15
        },
        {
          "x": 96,
          "y": 82,
          "color": "rgba(0, 0, 0, 1)",
          "size": 15
        },
        {
          "x": 110,
          "y": 83,
          "color": "rgba(0, 0, 0, 1)",
          "size": 15
        },
        {
          "x": 129,
          "y": 72,
          "color": "rgba(0, 0, 0, 1)",
          "size": 15
        },
        {
          "x": 88,
          "y": 40,
          "color": "rgba(0, 0, 0, 1)",
          "size": 15
        },
        {
          "x": 112,
          "y": 38,
          "color": "rgba(0, 0, 0, 1)",
          "size": 15
        },
        {
          "x": 97,
          "y": 57,
          "color": "rgba(0, 0, 0, 1)",
          "size": 15
        }
      ],
      "dataURL": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAy8AAALGCAYAAABMEa7OAAAJyElEQVR4nO3XQQoDQQwDwf3/p5MvOCzByKqCOQ+6uZ8HAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOCfPi9e4r8AAEAo8QIAAEQQLwAAQATxAgAARBAvAABABPECAABEEC8AAEAE8QIAAEQQLwAAQATxAgAARBAvAABABPECAABEEC8AAEAE8QIAAEQQLwAAwHkCBAAAiCBeAACACOIFAACIIF4AAIAI4gUAAIggXgAAgAjiBQAAiCBeAACACOIFAACIIF4AAIAI4gUAAIggXgAAgAjiBQAAiCBeAACACOIFAAD4SVtEtO0FAIAz2o75tr0AAHBG2zHfthcAAM5oO+bb9gIAwBltx3zbXgAAOKPtmG/bCwAAZ7Qd8217AQDgjLZjvm0vAACc0XbMt+0FAIAz2o75tr0AAHBG2zHfthcAAM5oO+bb9gIAwBltx3zbXgAAOKPtmG/bCwAAZ7Qd8217AQCA510IbD0AAKDQdoiIFwAAYGQ7RMQLAAAwsh0i4gUAABjZDhHxAgAAjGyHiHgBAABGtkNEvAAAACPbISJeAACAke0QES8AAMDIdoiIFwAAYGQ7RMQLAAAwsh0i4gUAABjZDhHxAgAAjGyHiHgBAABGtkNEvAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwKIvLAIBYv9X/6YAAAAASUVORK5CYII="
    }
  }

  helloPxon.pxif.pixels.forEach(function(e, i, a){
    drawPixel(e.x, e.y, e.color, e.size );
  })

// drawPixel(50, 50, 'rgba(100, 20, 200, 0.5)', 20)

function drawPixel (x, y, color, size) {
    console.log('drawing it.')
    ctx.beginPath();
    x = ( Math.ceil(x/size) * size ) - size;
    y = ( Math.ceil(y/size) * size ) - size;
    ctx.moveTo (x, y);
    ctx.fillStyle = color;
    ctx.lineHeight = 0;

    if ( color === 'rgba(0, 0, 0, 0)' ) {
      ctx.clearRect(x,y,size,size);
    }
    else {
      ctx.fillRect(x,y,size,size);
    }

    return {
      x: x,
      y: y
    };
  };
